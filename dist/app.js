(()=>{"use strict";const e="https://ubrnopsjlvwleakngnmr.supabase.co/rest/v1/todos",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzODE5MjQ4MSwiZXhwIjoxOTUzNzY4NDgxfQ.3JdQW11rNZNpvcehhwFVaofXL2agE5LDn_3O4BvSAHw";document.addEventListener("DOMContentLoaded",(()=>{fetch(e,{headers:{apiKey:t}}).then((e=>e.json())).then((e=>{e.forEach((e=>o(e)))}))}));const n=n=>{const o=+n.target.id.split("-").pop(),r=n.target.checked;n.preventDefault(),((n,o)=>fetch(e+"?id=eq."+n,{method:"PATCH",headers:{"Content-Type":"application/json",apiKey:t,Prefer:"return=representation"},body:JSON.stringify({done:o})}))(o,r).then((()=>{n.target.checked=r}))},o=e=>{document.querySelector("ul").insertAdjacentHTML("beforeend",`\n        <li>\n            <label>\n                <input type="checkbox" id="todo-${e.id}" ${e.done?"checked":""} /> \n                ${e.text}\n            </label>\n        </li>\n    `),document.querySelector("input#todo-"+e.id).addEventListener("click",n)};document.querySelector("form").addEventListener("submit",(n=>{n.preventDefault();const r=document.querySelector('input[name="todo-text"]');var d;(d={text:r.value,done:!1},fetch(e,{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json",apiKey:t,Prefer:"return=representation"}}).then((e=>e.json()))).then((e=>{o(e[0]),r.value="",r.focus()}))}))})();